var Lightue=function(){"use strict";var t=null,e=new WeakMap,r=!1;function n(t,e={}){return new u({data:t},"data","root",document.querySelector(e.el||"body"))}function i(t){return t.replace(/\B([A-Z])/g,"-$1").toLowerCase()}function s(e,n,i,s){var a;null!=e[n]&&("function"==typeof e[n]&&(a=e[n]),function l(o){o&&a&&(t=l),r=!0;var u=a?a():e[n];r=!1,"function"==typeof s?s(i,u):i[s]=u,o&&a&&(t=null)}(!0))}function a(t){return["string","number"].indexOf(typeof t)>-1}function l(t){return"object"==typeof t&&null!=t}function o(t,e){for(var r in e)t[r]=e[r]}function u(t,r,n,o,c,h){this.ndataKey=r=String(r);var d=t[r];for(var f in a(c=c||("function"==typeof d?d():d))||Array.isArray(c)||null==c?d={$$:d}:"function"==typeof d&&(d=c),this.key=n||"",this.childArrEls=[],this.childEls={},this.tag=d&&d.$tag||("$_"==r.slice(0,2)?"span":"div"),this.el=document.createElement(this.tag),h&&h.parentNode?(h.parentNode.insertBefore(this.el,h),h.remove()):o&&o.appendChild(this.el),n&&this.el.classList.add(n),this.texts={},this.el.VNode=this,d){var p=d[f];if("$"==f[0]){var v="function"==typeof p?p():p;"$$"==f.slice(0,2)?"$$"==f&&Array.isArray(v)?(this.arrStart=new Comment("arr start"),this.arrEnd=new Comment("arr end"),this.el.appendChild(this.arrStart),this.el.appendChild(this.arrEnd),s(d,f,this.el,(t,n)=>{var s=document.createDocumentFragment(),a=[];Array.isArray(n)?(n.$mappedFrom&&e.set(n.$mappedFrom,this),a=n.map((t,e)=>new u(n,e,i(r)+"-item",s).el)):a.push(s.appendChild(document.createElement("span"))),this.el.insertBefore(s,this.arrEnd),this.childArrEls.forEach(t=>t.remove()),this.childArrEls=a})):"$$"==f&&l(v)?this._addChild(p,d,f):a(v)&&(this.texts[f]=document.createTextNode(v),this.el.appendChild(this.texts[f]),s(d,f,this.texts[f],"textContent")):"$_"==f.slice(0,2)?new u(d,f,i(f.slice(2)),this.el):"$class"==f?Object.keys(p).forEach(t=>{s(p,t,this.el,(function(e,r){e.classList[r?"add":"remove"](i(t))}))}):"$value"==f&&["input","textarea"].indexOf(this.tag)>-1&&s(d,"$value",this.el,"value")}else"_"==f[0]?(t=>{s(d,f,this.el,(function(e,r){null!=r?e.setAttribute(t,r):e.removeAttribute(t)}))})(i(f.slice(1))):"on"==f.slice(0,2)?this.el.addEventListener(f.slice(2),p):this._addChild(p,d,f,i(f))}}return n._abortDep=!1,u.prototype._addChild=function(t,e,r,n){"function"==typeof t?s(e,r,this.el,(t,i)=>{this.childEls[r]&&!l(i)||(this.childEls[r]=new u(e,r,n,this.el,i,this.childEls[r]).el)}):new u(e,r,n,this.el)},n.useState=function(s){if(!l(s)||s._ls)return s;var a,o={},c={};function h(t,e,r){var i=!1;return r&&r._ls?(t[e]=r._target,c[e]=r):(t[e]=r,l(r)?(c[e]=n.useState(r),i=!0):delete c[e]),n._abortDep||(o[e]&&o[e].forEach(t=>t(i)),Array.isArray(t)&&(e=parseInt(e))>=0&&a&&a(r,e)),!0}return Array.isArray(s)?new Proxy(s,{get:function(s,h){if("_ls"==h)return!0;if("_target"==h)return s;if("map"==h&&r)return function(t){var o,h,d,f=s.map((e,r)=>(l(e)&&(c[r]=c[r]||n.useState(e)),t(c[r]||e,r)));return f.$mappedFrom=s,h=(a,o)=>{l(a)&&(c[o]=n.useState(a));var h,d=e.get(s),f={};r=!0,h=t(c[o]||a,o),r=!1,f[o]=h;var p=new u(f,o,i(d.ndataKey)+"-item");d.el.insertBefore(p.el,d.childArrEls[o]||d.arrEnd),d.childArrEls[o]&&d.childArrEls[o].remove(),d.childArrEls.splice(o,1,p.el)},a="function"==typeof(o=a)?function(...t){o.call(this,...t),h.call(this,...t)}:function(...t){d&&d.call(this,...t),h.call(this,...t)},f};if(null!=s[h]&&!s.hasOwnProperty(h))return s[h];o[h]||(o[h]=new Set),t&&o[h].add(t);var d=s[h];return l(d)&&(c[h]=c[h]||n.useState(d)),c[h]||d},set:h}):new Proxy(s,{get:function(e,r){if("_ls"==r)return!0;if("_target"==r)return e;if(null!=e[r]&&!e.hasOwnProperty(r))return"function"==typeof e[r]?e[r].bind(e):e[r];o[r]||(o[r]=new Set),t&&o[r].add(t);var i=e[r];return l(i)&&(c[r]=c[r]||n.useState(i)),c[r]||i},set:h})},n.for=function(t,e){for(var r=[],n=0;n<t;n++)r.push(e?e(n):"");return r},function(){var t=["div","span","form","label","input","select","img","button","table","tr","td","a","ul","li"];for(var e in t){var r=t[e];n[r]=function(t){function e(e){return function(r){var n={$tag:t};return e&&(n.$class={},n.$class[e]=1),a(r)||Array.isArray(r)?(n.$$=r,n):l(r)?(r.$tag=t,l(r.$class)&&n.$class?o(r.$class,n.$class):n.$class&&(r.$class=n.$class),r):null==r||void 0===r?n:void 0}}return new Proxy(e(),{get:function(t,r){return e(r)}})}(r)}}(),n}();