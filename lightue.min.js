function Lightue(t,e){function n(t,e,n){Object.defineProperty(t,e,{value:n,enumerable:!1,writable:!0,configurable:!0})}function i(t){return t.replace(/\B([A-Z])/g,"-$1").toLowerCase()}function r(){var t=this.length;Array.prototype.push.apply(this,arguments);for(var e=0;e<arguments.length;e++){var n=new o(this,t+e,this.$node,i(this.$node.key)+"-item");this.$node._addChild(n)}}function s(t,e,n,i,r,s){(s=s||{}).get=s.get||function(t,e){return t[e]},s.set=s.set||function(t,e,n){t[e]=n};var o=Object.getOwnPropertyDescriptor(t,e),a=o&&o.set,l=function(t){s.convert&&(t=s.convert(t)),t!=s.get(n,i)&&(a&&a.call(this,t),s.set(n,i,t))};o&&o.get&&(Lightue._dep={notify:function(){var r=t[e];s.convert&&(r=s.convert(r)),r!=s.get(n,i)&&s.set(n,i,r)}}),l(t[e]),o&&o.get&&(Lightue._dep=null),Object.defineProperty(t,e,{get:o&&o.get||function(){return s.get(n,i)},set:l,enumerable:r||!1,configurable:!0})}function o(t,e,r,a){e=String(e);var l=this,c=this.ndata=t[e];if(this.parent=r,this.key=a||"",this.childNodes=[],this.el=document.createElement(c&&c.$tag||("$_"==e.slice(0,2)?"span":"div")),a&&this.el.classList.add(a),"string"==typeof c||"number"==typeof c)s(t,e,this.el,"textContent",!0);else if(Array.isArray(c))this._setChildren(c);else if("object"==typeof c&&null!=c)for(var u in n(c,"$node",this),"input"!=c.$tag&&"textarea"!=c.$tag||s(c,"$value",this.el,"value"),this.texts={},c){var h=c[u];"$"==u[0]?"$$"==u.slice(0,2)?"$$"==u&&Array.isArray(h)?this._setChildren(h):"$$"==u&&"object"==typeof h?this._addChild(new o(c,u,this,"")):"string"!=typeof h&&"number"!=typeof h||(this.texts[u]=document.createTextNode(h),this.el.appendChild(this.texts[u]),s(c,u,this.texts[u],"textContent",!0)):"$_"==u.slice(0,2)?this._addChild(new o(c,u,this,i(u.slice(2)))):"$class"==u&&Object.keys(h).forEach((function(t){s(h,t,l.el,"classList",!0,{get:function(e,n){return e.classList.contains(i(t))},set:function(e,n,r){e.classList[r?"add":"remove"](i(t))},convert:Boolean})})):"_"==u[0]?s(c,u,this.el,i(u.slice(1)),!0,{get:function(t,e){return t.getAttribute(e)},set:function(t,e,n){t.setAttribute(e,n)}}):"on"==u.slice(0,2)?function(t){l.el.addEventListener(u.slice(2),(function(e){Array.isArray(t)?t[0].apply(l.el,[e].concat(t.slice(1))):t.call(l.el,e)}))}(h):this._addChild(new o(c,u,this,i(u)))}}e=e||{},o.prototype._addChild=function(t){this.el.appendChild(t.el),this.childNodes.push(t)},o.prototype._setChildren=function(t){n(t,"$node",this);var e=this;this.childNodes=t.map((function(n,r){var s=new o(t,r,e,i(e.key)+"-item");return e.el.appendChild(s.el),s})),n(t,"push",r)};var a=new o({data:t},"data",null,"root");return document.querySelector(e.el||"body").appendChild(a.el),t}Lightue._dep=null,Lightue.useState=function(t){var e=JSON.parse(JSON.stringify(t)),n={},i={};return Object.keys(t).forEach((function(e){i[e]=[],n[e]={get:function(){return Lightue._dep&&i[e].push(Lightue._dep),t[e]},set:function(n){t[e]=n,i[e].forEach((function(t){t.notify()}))},enumerable:!0,configurable:!0}})),Object.defineProperties(e,n),e},Lightue.for=function(t,e){for(var n=[],i=0;i<t;i++)n.push(e?e(i):"");return n};